package entitiesManagers;

import java.util.List;

import database.DatabaseConnector;
import exceptions.ConnectionException;
import exceptions.UserPasswordException;

public class UsersManager {
	
	private static UsersManager instance = null;
	
	private DatabaseConnector connection = null;
	
	public void login(String username, String password) throws UserPasswordException, ConnectionException{
		connection = new DatabaseConnector(username, password);
	}
	
	public ClinicalRecordsManager getClinicalRecordsManager(){
		return new ClinicalRecordsManager();
	}
	
	public PatientManager getPatientManager(){
		return this.connection;
	}
	
	public StudyManager getStudyManager(){
		return this.connection;
	}
	
	public List<String> getStudyTypes(){
		if(this.connection != null)
			return this.connection.getStudyTypes();
		return null;
	}
	
	public static UsersManager getInstance(){
		if(instance == null){
			instance = new UsersManager();
			
			//TODO hay que sacar esta línea
			try {
				instance.login("", "");
			} catch (UserPasswordException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (ConnectionException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
		
		return instance;
	}
}
